<!DOCTYPE html>
<html lang="en">

<head>
<link rel="icon" href="data:,">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Course Viewer - EFS Learning Platform</title>
    <link rel="stylesheet" href="Mainpage.css">
    <link rel="icon" href="data:,">
    <style>
        /* Hide scrollbars */
        ::-webkit-scrollbar {
            display: none;
        }

        html,
        body {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* Page-specific container sizing overrides for larger layout */
        .container { max-width: 1200px; width: 95vw; }
        .glass-card { padding: 32px; position: relative; }

        .layout {
            display: grid;
            grid-template-columns: 280px 1fr;
            gap: 24px;
            margin-top: 24px;
        }

        .sidebar {
            background: rgba(15, 23, 42, 0.5);
            border: 1px solid rgba(59, 130, 246, 0.2);
            border-radius: 12px;
            padding: 12px;
            position: sticky;
            top: 88px;
            align-self: start;
        }

        .sidebar button { width: 100%; margin-bottom: 10px; }
        .sidebar button.active {
            background: linear-gradient(135deg, #60a5fa 0%, #3b82f6 100%);
            box-shadow: 0 6px 18px rgba(59,130,246,0.35);
        }

        .course-content { background: rgba(15, 23, 42, 0.4); border-radius: 12px; padding: 20px; }

        .course-placeholder {
            text-align: center;
            padding: 60px 20px;
            background: rgba(15, 23, 42, 0.4);
            border: 2px dashed rgba(59, 130, 246, 0.3);
            border-radius: 16px;
            color: #94a3b8;
        }

        .course-placeholder svg {
            width: 80px;
            height: 80px;
            margin: 0 auto 24px;
            opacity: 0.5;
        }

        .course-placeholder h2 {
            font-size: 24px;
            margin-bottom: 12px;
            color: #60a5fa;
        }

        .course-placeholder p {
            font-size: 16px;
            line-height: 1.6;
        }

        /* Responsive adjustments */
        @media (max-width: 1024px) {
            .container { max-width: 900px; }
            .layout { grid-template-columns: 240px 1fr; gap: 20px; }
        }

        @media (max-width: 768px) {
            .container { width: 100vw; padding: 16px; }
            .glass-card { padding: 24px; }
            .layout { grid-template-columns: 1fr; gap: 16px; padding-top: 40px; }
            .sidebar { position: static; top: auto; }
            .sidebar button { margin-bottom: 10px; }
            .course-content { padding: 16px; }
        }

        /* Back button theme */
        .back-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 14px;
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: #fff;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(59,130,246,0.35);
            transition: transform 0.15s ease, box-shadow 0.2s ease, background 0.2s ease;
            position: absolute;
            top: 16px;
            left: 16px;
        }
        .back-btn:hover { background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%); transform: translateY(-1px); }
        .back-btn:active { transform: translateY(0); }
        .back-btn svg { width: 18px; height: 18px; }
    </style>
</head>

<body>
    <div class="container">
        <div class="glass-card">
            <div class="header" style="margin-bottom: 16px;">
                <button class="back-btn" onclick="window.location.href='Mainpage.html'">
                    <svg viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12.5 7.5L8.5 10L12.5 12.5" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    Back
                </button>
                <h1 id="courseCode">Loading...</h1>
                <p class="subtitle" id="courseTitle">Loading course information...</p>
            </div>

            <div class="layout">
                <div class="sidebar">
                    <button class="submit-btn" onclick="selectTab('desc')">Course Description</button>
                    <button class="submit-btn" onclick="selectTab('materials')">Course Materials</button>
                    <button class="submit-btn" onclick="selectTab('mock')">Mock Exercise</button>
                    <button class="submit-btn" onclick="selectTab('timetable')">Time Table</button>
                </div>
                <div class="course-content" id="contentArea">
                    <div class="course-placeholder" id="placeholder">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M12 6V12L16 14M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                        <h2>Course Content</h2>
                        <p>This course is available in the database.</p>
                        <p style="margin-top: 16px; color: #60a5fa;">Course materials and content will be displayed here.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let coursesDatabase = {};

        // Load courses database
        async function loadCoursesDatabase() {
            try {
                const response = await fetch('/courses');
                const data = await response.json();
                coursesDatabase = data?.data || {};
                console.log('Courses database loaded successfully');
                displayCourseInfo();
            } catch (error) {
                console.error('Error loading courses database:', error);
                document.getElementById('courseTitle').textContent = 'Error loading course details';
            }
        }

        // Display course information
        function displayCourseInfo() {
            const urlParams = new URLSearchParams(window.location.search);
            const courseCode = urlParams.get('code');

            if (!courseCode) {
                window.location.href = 'Mainpage.html';
                return;
            }

            const courseTitle = coursesDatabase[courseCode];

            if (!courseTitle) {
                alert('Course code not found. Redirecting to main page.');
                window.location.href = 'Mainpage.html';
                return;
            }

            // Display course information
            document.getElementById('courseCode').textContent = courseCode;
            document.getElementById('courseTitle').textContent = courseTitle;
        }

        function selectTab(tab) {
            const area = document.getElementById('contentArea');
            const sections = {
                desc: '<h3>Course Description</h3><p>Details will be populated here.</p>',
                materials: '<h3>Course Materials</h3><p>Links and files will appear here.</p>',
                mock: '<h3>Mock Exercise</h3><p>Practice exercises will be shown here.</p>',
                timetable: '<h3>Time Table</h3><p>Schedule will be listed here.</p>'
            };
            area.innerHTML = sections[tab] || sections.desc;
        }

        // Load database on page load
        loadCoursesDatabase();

        // Scroll button functionality - only scroll down
        function handleScroll() {
            window.scrollBy({ top: 300, behavior: 'smooth' });
        }

        window.addEventListener('scroll', function () {
            const btn = document.getElementById('scrollBtn');
            if (window.scrollY > 100) {
                btn.classList.add('visible');
            } else {
                btn.classList.remove('visible');
            }
        });
    </script>

    <!-- Scroll Button -->
    <button class="scroll-btn" id="scrollBtn" onclick="handleScroll()">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M5 15L12 8L19 15" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round" />
        </svg>
    </button>
</body>

</html>


